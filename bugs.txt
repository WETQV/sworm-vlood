

# üöÄ –û–∫–µ–π, –Ω–∞—á–∏–Ω–∞–µ–º —Å –Ω—É–ª—è ‚Äî –ø–æ—à–∞–≥–æ–≤–æ

–£ –≤–∞—Å –ø–æ–∫–∞ –∫–∞—à–∞ –∏–∑ –∫—É—Å–∫–æ–≤ –∫–æ–¥–∞. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º –≤—Å—ë **–ø–æ –ø–æ—Ä—è–¥–∫—É**, –∫–∞–∂–¥—ã–π —à–∞–≥ ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## –®–∞–≥ 1 ‚Äî –ß–∏—Å—Ç—ã–π –ø—Ä–æ–µ–∫—Ç, –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–°–æ–∑–¥–∞–π –ø–∞–ø–∫–∏ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç):

```
res://
‚îú‚îÄ‚îÄ scenes/
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ game/
‚îÇ   ‚îú‚îÄ‚îÄ player/
‚îÇ   ‚îî‚îÄ‚îÄ enemies/
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ autoload/
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îî‚îÄ‚îÄ assets/
    ‚îî‚îÄ‚îÄ sprites/
```

---

## –®–∞–≥ 2 ‚Äî GameManager (–∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞)

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `scripts/autoload/game_manager.gd`:

```gdscript
# scripts/autoload/game_manager.gd
extends Node

enum PlayerClass { WARRIOR, RANGER, MAGE, PALADIN }

const CLASS_DATA: Dictionary = {
    PlayerClass.WARRIOR: {
        "name": "–ú–µ—á–Ω–∏–∫",
        "description": "–ë–ª–∏–∂–Ω–∏–π –±–æ–π. –í—ã—Å–æ–∫–∏–π —É—Ä–æ–Ω.",
        "color": Color.INDIAN_RED,
        "stats": {"hp": 120, "damage": 25, "speed": 200}
    },
    PlayerClass.RANGER: {
        "name": "–õ—É—á–Ω–∏–∫",
        "description": "–î–∞–ª—å–Ω–∏–π –±–æ–π. –ë—ã—Å—Ç—Ä—ã–π.",
        "color": Color.FOREST_GREEN,
        "stats": {"hp": 80, "damage": 20, "speed": 260}
    },
    PlayerClass.MAGE: {
        "name": "–ú–∞–≥",
        "description": "–ú–æ—â–Ω–∞—è –º–∞–≥–∏—è. –•—Ä—É–ø–∫–∏–π.",
        "color": Color.DODGER_BLUE,
        "stats": {"hp": 70, "damage": 35, "speed": 200}
    },
    PlayerClass.PALADIN: {
        "name": "–ü–∞–ª–∞–¥–∏–Ω",
        "description": "–©–∏—Ç. –ó–∞—â–∏—â–∞–µ—Ç —Å–æ—é–∑–Ω–∏–∫–æ–≤.",
        "color": Color.GOLD,
        "stats": {"hp": 150, "damage": 15, "speed": 170}
    }
}

var selected_class: PlayerClass = PlayerClass.WARRIOR


func get_class_data(class_id: PlayerClass) -> Dictionary:
    return CLASS_DATA[class_id]


func get_selected_class_data() -> Dictionary:
    return CLASS_DATA[selected_class]
```

**–°—Ä–∞–∑—É –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π:**
```
–ü—Ä–æ–µ–∫—Ç ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞
‚Üí –ü—É—Ç—å: res://scripts/autoload/game_manager.gd
‚Üí –ò–º—è: GameManager
‚Üí –ù–∞–∂–º–∏ "–î–æ–±–∞–≤–∏—Ç—å"
```

---

## –®–∞–≥ 3 ‚Äî –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

### –°–æ–∑–¥–∞–π —Å—Ü–µ–Ω—É `scenes/ui/main_menu.tscn`

–í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ Godot:

```
1. –°—Ü–µ–Ω–∞ ‚Üí –ù–æ–≤–∞—è —Å—Ü–µ–Ω–∞ ‚Üí Other Node ‚Üí Control
2. –ù–∞–∑–æ–≤–∏ –∫–æ—Ä–µ–Ω—å "MainMenu"
3. –í—ã–¥–µ–ª–∏ MainMenu ‚Üí Inspector ‚Üí Layout ‚Üí Full Rect
```

–¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è–π –Ω–æ–¥—ã **–ø–æ –æ–¥–Ω–æ–π**:

```
MainMenu (Control) ‚Äî Full Rect
‚îÇ
‚îú‚îÄ‚îÄ Background (ColorRect)
‚îÇ   ‚Üí Layout: Full Rect
‚îÇ   ‚Üí Color: #1a1a2e (—Ç—ë–º–Ω–æ-—Å–∏–Ω–∏–π)
‚îÇ
‚îú‚îÄ‚îÄ CenterContainer (CenterContainer)
‚îÇ   ‚Üí Layout: Full Rect
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ VBoxContainer
‚îÇ       ‚Üí Theme Overrides ‚Üí Constants ‚Üí Separation: 20
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ Title (Label)
‚îÇ       ‚îÇ   ‚Üí Text: "DUNGEON CRAWL"
‚îÇ       ‚îÇ   ‚Üí Horizontal Alignment: Center
‚îÇ       ‚îÇ   ‚Üí Theme Overrides ‚Üí Font Sizes ‚Üí 48
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ PlayButton (Button)
‚îÇ       ‚îÇ   ‚Üí Text: "–ò–≥—Ä–∞—Ç—å"
‚îÇ       ‚îÇ   ‚Üí Custom Minimum Size: (300, 50)
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ QuitButton (Button)
‚îÇ           ‚Üí Text: "–í—ã—Ö–æ–¥"
‚îÇ           ‚Üí Custom Minimum Size: (300, 50)
```

> **–í–∞–∂–Ω–æ:** –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã –∫–æ—Ç–æ—Ä—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –≤ –∫–æ–¥–µ ‚Äî –ü–ö–ú ‚Üí **"% Access as Unique Name"**. –°–¥–µ–ª–∞–π —ç—Ç–æ –¥–ª—è `PlayButton` –∏ `QuitButton`.

### –°–∫—Ä–∏–ø—Ç ‚Äî –ø—Ä–∏–∫—Ä–µ–ø–∏ –∫ MainMenu

```gdscript
# scripts/ui/main_menu.gd
extends Control

@onready var play_button: Button = %PlayButton
@onready var quit_button: Button = %QuitButton


func _ready() -> void:
    play_button.pressed.connect(_on_play)
    quit_button.pressed.connect(_on_quit)
    play_button.grab_focus()


func _on_play() -> void:
    get_tree().change_scene_to_file("res://scenes/ui/class_select.tscn")


func _on_quit() -> void:
    get_tree().quit()
```

### ‚úÖ –ü–†–û–í–ï–†–ö–ê

```
–ü—Ä–æ–µ–∫—Ç ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí Application ‚Üí Run ‚Üí Main Scene:
‚Üí –í—ã–±–µ—Ä–∏: res://scenes/ui/main_menu.tscn

–ó–∞–ø—É—Å—Ç–∏ (F5). –î–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å:
- –¢—ë–º–Ω—ã–π —Ñ–æ–Ω
- –ù–∞–∑–≤–∞–Ω–∏–µ "DUNGEON CRAWL"
- –î–≤–µ –∫–Ω–æ–ø–∫–∏
- "–í—ã—Ö–æ–¥" –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∏–≥—Ä—É
- "–ò–≥—Ä–∞—Ç—å" –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–∫—É (class_select –µ—â—ë –Ω–µ—Ç) ‚Äî –≠–¢–û –ù–û–†–ú–ê–õ–¨–ù–û
```

**–†–∞–±–æ—Ç–∞–µ—Ç? –ò–¥—ë–º –¥–∞–ª—å—à–µ. –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç? –ü–∏—à–∏ –º–Ω–µ –æ—à–∏–±–∫—É.**

---

## –®–∞–≥ 4 ‚Äî –í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞

### –°–æ–∑–¥–∞–π —Å—Ü–µ–Ω—É `scenes/ui/class_select.tscn`

```
ClassSelect (Control) ‚Äî Full Rect
‚îÇ
‚îú‚îÄ‚îÄ Background (ColorRect)
‚îÇ   ‚Üí Layout: Full Rect
‚îÇ   ‚Üí Color: #16213e
‚îÇ
‚îú‚îÄ‚îÄ VBoxContainer (VBoxContainer)
‚îÇ   ‚Üí Layout: Full Rect
‚îÇ   ‚Üí Theme Overrides ‚Üí Constants ‚Üí Separation: 30
‚îÇ   ‚Üí Alignment: Center
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Title (Label)
‚îÇ   ‚îÇ   ‚Üí Text: "–í–´–ë–ï–†–ò –ö–õ–ê–°–°"
‚îÇ   ‚îÇ   ‚Üí Horizontal Alignment: Center
‚îÇ   ‚îÇ   ‚Üí Font Size: 36
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ CardsBox (HBoxContainer)       ‚Üê % Unique Name!
‚îÇ   ‚îÇ   ‚Üí Alignment: Center
‚îÇ   ‚îÇ   ‚Üí Separation: 20
‚îÇ   ‚îÇ   (–æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–∑–¥–∞–¥–∏–º –∫–æ–¥–æ–º)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ SelectedLabel (Label)          ‚Üê % Unique Name!
‚îÇ   ‚îÇ   ‚Üí Text: "–í—ã–±—Ä–∞–Ω: –ú–µ—á–Ω–∏–∫"
‚îÇ   ‚îÇ   ‚Üí Horizontal Alignment: Center
‚îÇ   ‚îÇ   ‚Üí Font Size: 20
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ ButtonsBox (HBoxContainer)
‚îÇ       ‚Üí Alignment: Center
‚îÇ       ‚Üí Separation: 20
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ BackButton (Button)        ‚Üê % Unique Name!
‚îÇ       ‚îÇ   ‚Üí Text: "–ù–∞–∑–∞–¥"
‚îÇ       ‚îÇ   ‚Üí Minimum Size: (150, 45)
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ StartButton (Button)       ‚Üê % Unique Name!
‚îÇ           ‚Üí Text: "–ù–∞—á–∞—Ç—å!"
‚îÇ           ‚Üí Minimum Size: (150, 45)
```

### –°–∫—Ä–∏–ø—Ç

```gdscript
# scripts/ui/class_select.gd
extends Control

@onready var cards_box: HBoxContainer = %CardsBox
@onready var selected_label: Label = %SelectedLabel
@onready var start_button: Button = %StartButton
@onready var back_button: Button = %BackButton

var _selected_class: GameManager.PlayerClass = GameManager.PlayerClass.WARRIOR
var _cards: Array = []


func _ready() -> void:
    _create_cards()
    _connect_buttons()
    _highlight_selected()


func _create_cards() -> void:
    for class_id in GameManager.CLASS_DATA:
        var data: Dictionary = GameManager.CLASS_DATA[class_id]

        # –ü–∞–Ω–µ–ª—å-–∫–∞—Ä—Ç–æ—á–∫–∞
        var panel := PanelContainer.new()
        panel.custom_minimum_size = Vector2(180, 250)

        # –ö–æ–Ω—Ç–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏
        var vbox := VBoxContainer.new()
        vbox.alignment = BoxContainer.ALIGNMENT_CENTER
        vbox.add_theme_constant_override("separation", 12)
        panel.add_child(vbox)

        # –¶–≤–µ—Ç–Ω–æ–π –∫–≤–∞–¥—Ä–∞—Ç –≤–º–µ—Å—Ç–æ –∏–∫–æ–Ω–∫–∏
        var icon := ColorRect.new()
        icon.custom_minimum_size = Vector2(60, 60)
        icon.color = data["color"]
        icon.size_flags_horizontal = Control.SIZE_SHRINK_CENTER
        vbox.add_child(icon)

        # –ò–º—è –∫–ª–∞—Å—Å–∞
        var name_label := Label.new()
        name_label.text = data["name"]
        name_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
        name_label.add_theme_font_size_override("font_size", 22)
        vbox.add_child(name_label)

        # –û–ø–∏—Å–∞–Ω–∏–µ
        var desc := Label.new()
        desc.text = data["description"]
        desc.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
        desc.autowrap_mode = TextServer.AUTOWRAP_WORD
        desc.custom_minimum_size.x = 160
        desc.add_theme_font_size_override("font_size", 13)
        vbox.add_child(desc)

        # –°—Ç–∞—Ç—ã
        var stats: Dictionary = data["stats"]
        var stats_label := Label.new()
        stats_label.text = "HP:%d ATK:%d SPD:%d" % [
            stats["hp"], stats["damage"], stats["speed"]
        ]
        stats_label.horizontal_alignment = HORIZONTAL_ALIGNMENT_CENTER
        stats_label.add_theme_font_size_override("font_size", 11)
        vbox.add_child(stats_label)

        # –ö–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ
        panel.gui_input.connect(_on_card_clicked.bind(class_id))
        panel.mouse_default_cursor_shape = Control.CURSOR_POINTING_HAND

        cards_box.add_child(panel)
        _cards.append({"panel": panel, "class_id": class_id})


func _connect_buttons() -> void:
    start_button.pressed.connect(_on_start)
    back_button.pressed.connect(_on_back)


func _on_card_clicked(event: InputEvent, class_id: GameManager.PlayerClass) -> void:
    if event is InputEventMouseButton and event.pressed:
        _selected_class = class_id
        _highlight_selected()


func _highlight_selected() -> void:
    var data: Dictionary = GameManager.CLASS_DATA[_selected_class]
    selected_label.text = "–í—ã–±—Ä–∞–Ω: %s" % data["name"]

    for card_data in _cards:
        var panel: PanelContainer = card_data["panel"]
        if card_data["class_id"] == _selected_class:
            panel.modulate = Color.WHITE
        else:
            panel.modulate = Color(0.5, 0.5, 0.5)


func _on_start() -> void:
    GameManager.selected_class = _selected_class
    get_tree().change_scene_to_file("res://scenes/game/game.tscn")


func _on_back() -> void:
    get_tree().change_scene_to_file("res://scenes/ui/main_menu.tscn")
```

### ‚úÖ –ü–†–û–í–ï–†–ö–ê

```
–ó–∞–ø—É—Å—Ç–∏ (F5):
1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí "–ò–≥—Ä–∞—Ç—å" ‚Üí –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –∫–ª–∞—Å—Å–∞
2. –ö–ª–∏–∫–∞–µ—à—å –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º ‚Äî –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω–∞—è
3. –í–Ω–∏–∑—É –ø–∏—à–µ—Ç "–í—ã–±—Ä–∞–Ω: –ú–∞–≥" (–∏–ª–∏ –∫–æ–≥–æ –≤—ã–±—Ä–∞–ª)
4. "–ù–∞–∑–∞–¥" ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é
5. "–ù–∞—á–∞—Ç—å!" ‚Üí –æ—à–∏–±–∫–∞ (game.tscn –µ—â—ë –Ω–µ—Ç) ‚Äî –ù–û–†–ú–ê–õ–¨–ù–û
```

---

## –®–∞–≥ 5 ‚Äî –ó–∞–≥–ª—É—à–∫–∞ –∏–≥—Ä–æ–≤–æ–π —Å—Ü–µ–Ω—ã

### –°–æ–∑–¥–∞–π `scenes/game/game.tscn`

```
Game (Node2D)
‚îÇ
‚îî‚îÄ‚îÄ CanvasLayer
    ‚îî‚îÄ‚îÄ Label
        ‚Üí Anchors Preset: Center
        ‚Üí Font Size: 28
```

### –°–∫—Ä–∏–ø—Ç

```gdscript
# scenes/game/game.gd
extends Node2D

@onready var label: Label = $CanvasLayer/Label


func _ready() -> void:
    var data := GameManager.get_selected_class_data()
    label.text = "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, %s!\nHP: %d | ATK: %d | SPD: %d\n\nESC ‚Äî –≤ –º–µ–Ω—é" % [
        data["name"],
        data["stats"]["hp"],
        data["stats"]["damage"],
        data["stats"]["speed"]
    ]


func _input(event: InputEvent) -> void:
    if event.is_action_pressed("ui_cancel"):
        get_tree().change_scene_to_file("res://scenes/ui/main_menu.tscn")
```

### ‚úÖ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê

```
–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å:

–ú–µ–Ω—é ‚Üí –ò–≥—Ä–∞—Ç—å ‚Üí –í—ã–±—Ä–∞–ª –ú–∞–≥–∞ ‚Üí –ù–∞—á–∞—Ç—å!
‚Üí "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –ú–∞–≥! HP:70..."
‚Üí ESC ‚Üí –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–µ–Ω—é

–ï—Å–ª–∏ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –ü–û–ó–î–†–ê–í–õ–Ø–Æ, –±–∞–∑–∞ –≥–æ—Ç–æ–≤–∞!
```

---

## üìã –ß—Ç–æ –¥–∞–ª—å—à–µ (–ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω!)

```
–°–µ–π—á–∞—Å –≤—ã –∑–¥–µ—Å—å
       ‚Üì
[‚úÖ] –®–∞–≥ 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
[‚úÖ] –®–∞–≥ 2: GameManager
[‚úÖ] –®–∞–≥ 3: –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
[‚úÖ] –®–∞–≥ 4: –í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞
[‚úÖ] –®–∞–≥ 5: –ó–∞–≥–ª—É—à–∫–∞ –∏–≥—Ä—ã
[ ] –®–∞–≥ 6: –ü–µ—Ä—Å–æ–Ω–∞–∂ ‚Äî –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ WASD        ‚Üê –°–õ–ï–î–£–Æ–©–ò–ô
[ ] –®–∞–≥ 7: –ü–µ—Ä—Å–æ–Ω–∞–∂ ‚Äî –∞—Ç–∞–∫–∞
[ ] –®–∞–≥ 8: –ü—Ä–æ—Å—Ç–æ–π –≤—Ä–∞–≥
[ ] –®–∞–≥ 9: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–Ω–∞—Ç
[ ] –®–∞–≥ 10: –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä
```

–°–¥–µ–ª–∞–π —à–∞–≥–∏ 1‚Äì5, –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏ –Ω–∞–ø–∏—à–∏ –º–Ω–µ ‚Äî –¥–∞–ª—å—à–µ –¥–µ–ª–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞!